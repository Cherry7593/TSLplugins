# Visitor å’Œ Speed æ¨¡å—ä¼˜åŒ–æ€»ç»“

## ä¼˜åŒ–æ—¶é—´
2025å¹´11æœˆ26æ—¥

## ä¼˜åŒ–å†…å®¹

### 1. æ·»åŠ  Tab è¡¥å…¨åŠŸèƒ½ âœ…

#### Visitor å‘½ä»¤è¡¥å…¨
```bash
/tsl visitor <TAB>
â†’ set  remove  check  list  reload

/tsl visitor set <TAB>
â†’ Steve  Alex  Notch  (åœ¨çº¿ç©å®¶åˆ—è¡¨)

/tsl visitor check <TAB>
â†’ Steve  Alex  Notch  (åœ¨çº¿ç©å®¶åˆ—è¡¨)
```

**å®ç°ç»†èŠ‚**ï¼š
- ç¬¬ä¸€çº§ï¼šè¡¥å…¨å­å‘½ä»¤ï¼ˆset, remove, check, list, reloadï¼‰
- ç¬¬äºŒçº§ï¼šè¡¥å…¨ç©å®¶åï¼ˆä»… set, remove, check éœ€è¦ï¼‰
- æƒé™æ£€æŸ¥ï¼šæ— æƒé™æ—¶è¿”å›ç©ºåˆ—è¡¨
- æ™ºèƒ½è¿‡æ»¤ï¼šæ ¹æ®å·²è¾“å…¥å†…å®¹è¿‡æ»¤è¡¥å…¨é¡¹

#### Speed å‘½ä»¤è¡¥å…¨
```bash
/tsl speed <TAB>
â†’ walk  fly  0.5  1.0  1.5  2.0  2.5  3.0  5.0  10.0

/tsl speed walk <TAB>
â†’ 0.5  1.0  1.5  2.0  2.5  3.0  5.0  10.0

/tsl speed 2<TAB>
â†’ 2.0  2.5
```

**å®ç°ç»†èŠ‚**ï¼š
- ç¬¬ä¸€çº§ï¼šç±»å‹ï¼ˆwalk/flyï¼‰+ å¸¸ç”¨é€Ÿåº¦å€¼
- ç¬¬äºŒçº§ï¼šå¸¸ç”¨é€Ÿåº¦å€¼ï¼ˆä»…å½“ç¬¬ä¸€å‚æ•°æ˜¯ç±»å‹æ—¶ï¼‰
- å¸¸ç”¨å€¼ï¼š0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 5.0, 10.0
- æ™ºèƒ½è¿‡æ»¤ï¼šæ ¹æ®å·²è¾“å…¥å†…å®¹è¿‡æ»¤

---

### 2. Speed æ™ºèƒ½æ£€æµ‹åŠŸèƒ½ âœ…

#### åŠŸèƒ½è¯´æ˜
å…è®¸ç©å®¶ç›´æ¥è¾“å…¥ `/tsl speed <æ•°å€¼>`ï¼Œç³»ç»Ÿæ ¹æ®ç©å®¶å½“å‰çŠ¶æ€è‡ªåŠ¨é€‰æ‹©é€Ÿåº¦ç±»å‹ï¼š
- **é£è¡Œä¸­**ï¼šè‡ªåŠ¨è®¾ç½®é£è¡Œé€Ÿåº¦
- **åœ°é¢ä¸Š**ï¼šè‡ªåŠ¨è®¾ç½®è¡Œèµ°é€Ÿåº¦

#### ä½¿ç”¨ç¤ºä¾‹

**åœºæ™¯1ï¼šç©å®¶åœ¨åœ°é¢**
```bash
/tsl speed 2.0
â†’ Â§aå·²å°†ä½ çš„è¡Œèµ°é€Ÿåº¦è®¾ç½®ä¸º Â§e2.0 Â§aå€ Â§7(æ™ºèƒ½æ£€æµ‹)
```

**åœºæ™¯2ï¼šç©å®¶åœ¨é£è¡Œ**
```bash
/tsl speed 3.0
â†’ Â§aå·²å°†ä½ çš„é£è¡Œé€Ÿåº¦è®¾ç½®ä¸º Â§e3.0 Â§aå€ Â§7(æ™ºèƒ½æ£€æµ‹)
```

**åœºæ™¯3ï¼šä»æ”¯æŒæ˜ç¡®æŒ‡å®š**
```bash
/tsl speed walk 2.0
â†’ Â§aå·²å°†ä½ çš„è¡Œèµ°é€Ÿåº¦è®¾ç½®ä¸º Â§e2.0 Â§aå€

/tsl speed fly 3.0
â†’ Â§aå·²å°†ä½ çš„é£è¡Œé€Ÿåº¦è®¾ç½®ä¸º Â§e3.0 Â§aå€
```

#### å®ç°åŸç†
```kotlin
// æ£€æµ‹ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦æ˜¯æ•°å­—
val valueFromFirst = args[0].toDoubleOrNull()

if (valueFromFirst != null) {
    // æ˜¯æ•°å­—ï¼Œè¿›å…¥æ™ºèƒ½æ£€æµ‹
    if (player.isFlying) {
        // é£è¡Œä¸­ â†’ è®¾ç½®é£è¡Œé€Ÿåº¦
        setFlySpeed(player, value)
    } else {
        // åœ°é¢ä¸Š â†’ è®¾ç½®è¡Œèµ°é€Ÿåº¦
        setWalkSpeed(player, value)
    }
} else {
    // ä¸æ˜¯æ•°å­—ï¼ŒæŒ‰åŸé€»è¾‘å¤„ç† (walk/fly ç±»å‹)
}
```

#### ä¼˜åŠ¿
- âœ… **æ›´å¿«æ·**ï¼šå‡å°‘è¾“å…¥ï¼Œ3ä¸ªå•è¯å˜1ä¸ªå•è¯
- âœ… **æ›´æ™ºèƒ½**ï¼šè‡ªåŠ¨åˆ¤æ–­ç©å®¶çŠ¶æ€
- âœ… **å‘åå…¼å®¹**ï¼šåŸæœ‰å‘½ä»¤æ ¼å¼ä»ç„¶æœ‰æ•ˆ
- âœ… **æ¸…æ™°åé¦ˆ**ï¼šæ¶ˆæ¯ä¸­æ ‡æ³¨"(æ™ºèƒ½æ£€æµ‹)"

---

## ğŸ“Š å¯¹æ¯”è¡¨

### ä¼˜åŒ–å‰
```bash
# Visitor å‘½ä»¤
/tsl visitor s         # æ²¡æœ‰è¡¥å…¨
/tsl visitor set Ste   # éœ€è¦æ‰‹åŠ¨è¾“å…¥å®Œæ•´

# Speed å‘½ä»¤
/tsl speed w           # æ²¡æœ‰è¡¥å…¨
/tsl speed walk 2.0    # å¿…é¡»æ˜ç¡®æŒ‡å®šç±»å‹
```

### ä¼˜åŒ–å
```bash
# Visitor å‘½ä»¤
/tsl visitor s<TAB>    # â†’ set
/tsl visitor set <TAB> # â†’ Steve (è‡ªåŠ¨è¡¥å…¨ç©å®¶å)

# Speed å‘½ä»¤
/tsl speed w<TAB>      # â†’ walk
/tsl speed 2.0         # æ™ºèƒ½æ£€æµ‹ï¼Œè‡ªåŠ¨é€‰æ‹©ç±»å‹ âœ¨
```

---

## ğŸ¯ æŠ€æœ¯ç»†èŠ‚

### Tab è¡¥å…¨æ¥å£å®ç°
```kotlin
override fun tabComplete(
    sender: CommandSender,
    command: Command,
    label: String,
    args: Array<out String>
): List<String> {
    return when (args.size) {
        1 -> // ç¬¬ä¸€çº§è¡¥å…¨
        2 -> // ç¬¬äºŒçº§è¡¥å…¨
        else -> emptyList()
    }
}
```

### æ™ºèƒ½æ£€æµ‹æ ¸å¿ƒä»£ç 
```kotlin
// ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹æ˜¯å¦æ˜¯æ•°å­—
val valueFromFirst = args[0].toDoubleOrNull()

if (valueFromFirst != null) {
    // ç¬¬äºŒæ­¥ï¼šæ£€æµ‹é£è¡ŒçŠ¶æ€
    if (player.isFlying) {
        // é£è¡Œé€Ÿåº¦
    } else {
        // è¡Œèµ°é€Ÿåº¦
    }
}
```

### æƒé™æ£€æŸ¥
```kotlin
// Visitor è¡¥å…¨
if (!sender.hasPermission("tsl.visitor.admin")) {
    return emptyList()
}

// Speed æ™ºèƒ½æ£€æµ‹
if (player.isFlying) {
    if (!player.hasPermission("tsl.speed.fly")) {
        // æ‹’ç»
    }
} else {
    if (!player.hasPermission("tsl.speed.walk")) {
        // æ‹’ç»
    }
}
```

---

## ğŸ“‹ ä¿®æ”¹çš„æ–‡ä»¶

### VisitorCommand.kt
- **æ–°å¢**ï¼š`tabComplete()` æ–¹æ³•å®ç°
- **è¡¥å…¨**ï¼šå­å‘½ä»¤è¡¥å…¨ï¼ˆ5ä¸ªå­å‘½ä»¤ï¼‰
- **è¡¥å…¨**ï¼šç©å®¶åè¡¥å…¨ï¼ˆåœ¨çº¿ç©å®¶ï¼‰
- **è¡Œæ•°**ï¼š+31 è¡Œ

### SpeedCommand.kt
- **æ–°å¢**ï¼š`handleSmartSpeed()` æ™ºèƒ½æ£€æµ‹æ–¹æ³•
- **æ–°å¢**ï¼š`tabComplete()` æ–¹æ³•å®ç°
- **ä¿®æ”¹**ï¼š`handle()` æ–¹æ³•ï¼Œæ·»åŠ æ™ºèƒ½æ£€æµ‹é€»è¾‘
- **ä¿®æ”¹**ï¼šå¸®åŠ©ä¿¡æ¯ï¼Œæ·»åŠ æ™ºèƒ½æ£€æµ‹è¯´æ˜
- **è¡Œæ•°**ï¼š+89 è¡Œ

---

## ğŸ® ç”¨æˆ·ä½“éªŒæå‡

### 1. Visitor å‘½ä»¤
**ä¹‹å‰**ï¼š
```bash
/tsl visitor set Steve   # éœ€è¦æ‰‹åŠ¨è¾“å…¥å®Œæ•´å‘½ä»¤
```

**ç°åœ¨**ï¼š
```bash
/tsl visitor <TAB>       # æ˜¾ç¤ºæ‰€æœ‰å­å‘½ä»¤
/tsl visitor s<TAB>      # è‡ªåŠ¨è¡¥å…¨ set
/tsl visitor set <TAB>   # æ˜¾ç¤ºæ‰€æœ‰åœ¨çº¿ç©å®¶
/tsl visitor set S<TAB>  # è‡ªåŠ¨è¡¥å…¨ Steve
```

### 2. Speed å‘½ä»¤
**ä¹‹å‰**ï¼š
```bash
# åœ¨åœ°é¢æƒ³åŠ é€Ÿ
/tsl speed walk 2.0      # å¿…é¡»è®°ä½ç±»å‹

# é£è¡Œæ—¶æƒ³åŠ é€Ÿ
/tsl speed fly 3.0       # å¿…é¡»è®°ä½ç±»å‹
```

**ç°åœ¨**ï¼š
```bash
# åœ¨åœ°é¢æƒ³åŠ é€Ÿ
/tsl speed 2.0           # è‡ªåŠ¨è¯†åˆ« â†’ è¡Œèµ°é€Ÿåº¦ âœ¨

# é£è¡Œæ—¶æƒ³åŠ é€Ÿ
/tsl speed 3.0           # è‡ªåŠ¨è¯†åˆ« â†’ é£è¡Œé€Ÿåº¦ âœ¨

# ä¹Ÿå¯ä»¥æ˜ç¡®æŒ‡å®šï¼ˆå…¼å®¹æ—§æ–¹å¼ï¼‰
/tsl speed walk 2.0      # ä»ç„¶æœ‰æ•ˆ
```

---

## ğŸ¨ è¡¥å…¨æ•ˆæœå±•ç¤º

### Visitor è¡¥å…¨å±‚çº§
```
/tsl visitor
  â”œâ”€ set
  â”œâ”€ remove
  â”œâ”€ check
  â”œâ”€ list
  â””â”€ reload

/tsl visitor set
  â”œâ”€ Steve
  â”œâ”€ Alex
  â””â”€ Notch
```

### Speed è¡¥å…¨å±‚çº§
```
/tsl speed
  â”œâ”€ walk
  â”œâ”€ fly
  â”œâ”€ 0.5
  â”œâ”€ 1.0
  â”œâ”€ 1.5
  â”œâ”€ 2.0
  â”œâ”€ 2.5
  â”œâ”€ 3.0
  â”œâ”€ 5.0
  â””â”€ 10.0

/tsl speed walk
  â”œâ”€ 0.5
  â”œâ”€ 1.0
  â”œâ”€ 1.5
  â”œâ”€ 2.0
  â”œâ”€ 2.5
  â”œâ”€ 3.0
  â”œâ”€ 5.0
  â””â”€ 10.0
```

---

## ğŸ” æµ‹è¯•å»ºè®®

### Visitor è¡¥å…¨æµ‹è¯•
```bash
# æµ‹è¯•å­å‘½ä»¤è¡¥å…¨
/tsl visitor <TAB>          # åº”æ˜¾ç¤ºæ‰€æœ‰5ä¸ªå­å‘½ä»¤

# æµ‹è¯•ç©å®¶åè¡¥å…¨
/tsl visitor set <TAB>      # åº”æ˜¾ç¤ºæ‰€æœ‰åœ¨çº¿ç©å®¶
/tsl visitor check <TAB>    # åº”æ˜¾ç¤ºæ‰€æœ‰åœ¨çº¿ç©å®¶
/tsl visitor list <TAB>     # åº”æ— è¡¥å…¨ï¼ˆä¸éœ€è¦å‚æ•°ï¼‰

# æµ‹è¯•æƒé™
# ç§»é™¤æƒé™åï¼Œ<TAB> åº”æ— è¡¥å…¨
```

### Speed æ™ºèƒ½æ£€æµ‹æµ‹è¯•
```bash
# æµ‹è¯•åœ°é¢çŠ¶æ€
ç«™åœ¨åœ°é¢ â†’ /tsl speed 2.0
# é¢„æœŸï¼šè®¾ç½®è¡Œèµ°é€Ÿåº¦ä¸º 2.0 å€ (æ™ºèƒ½æ£€æµ‹)

# æµ‹è¯•é£è¡ŒçŠ¶æ€
é£è¡Œä¸­ â†’ /tsl speed 3.0
# é¢„æœŸï¼šè®¾ç½®é£è¡Œé€Ÿåº¦ä¸º 3.0 å€ (æ™ºèƒ½æ£€æµ‹)

# æµ‹è¯•å…¼å®¹æ€§
/tsl speed walk 2.0
# é¢„æœŸï¼šè®¾ç½®è¡Œèµ°é€Ÿåº¦ä¸º 2.0 å€ï¼ˆæ— æ™ºèƒ½æ£€æµ‹æ ‡æ³¨ï¼‰

# æµ‹è¯•è¡¥å…¨
/tsl speed <TAB>
# é¢„æœŸï¼šæ˜¾ç¤º walk, fly å’Œå¸¸ç”¨é€Ÿåº¦å€¼

/tsl speed 2<TAB>
# é¢„æœŸï¼šè‡ªåŠ¨è¡¥å…¨ 2.0 å’Œ 2.5
```

---

## âœ¨ æ€»ç»“

### å®Œæˆçš„ä¼˜åŒ–
1. âœ… **Visitor Tab è¡¥å…¨** - å­å‘½ä»¤ + ç©å®¶å
2. âœ… **Speed Tab è¡¥å…¨** - ç±»å‹ + å¸¸ç”¨é€Ÿåº¦å€¼
3. âœ… **Speed æ™ºèƒ½æ£€æµ‹** - æ ¹æ®é£è¡ŒçŠ¶æ€è‡ªåŠ¨é€‰æ‹©ç±»å‹

### ç”¨æˆ·ä½“éªŒæå‡
- âŒ¨ï¸ **å‡å°‘è¾“å…¥**ï¼šTab è¡¥å…¨èŠ‚çœæ—¶é—´
- ğŸ§  **æ›´æ™ºèƒ½**ï¼šè‡ªåŠ¨è¯†åˆ«ç©å®¶çŠ¶æ€
- ğŸ”„ **å‘åå…¼å®¹**ï¼šåŸæœ‰å‘½ä»¤æ ¼å¼ä¿æŒæœ‰æ•ˆ
- ğŸ“ **æ¸…æ™°åé¦ˆ**ï¼šæ™ºèƒ½æ£€æµ‹æ—¶æœ‰æ˜ç¡®æ ‡æ³¨

### ä»£ç è´¨é‡
- âœ… **æ— ç¼–è¯‘é”™è¯¯**
- âœ… **éµå¾ªç°æœ‰æ¶æ„**ï¼ˆSubCommandHandler æ¥å£ï¼‰
- âœ… **æƒé™æ£€æŸ¥å®Œå–„**
- âœ… **ä»£ç ç®€æ´æ¸…æ™°**

---

**ä¸¤ä¸ªä¼˜åŒ–ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼ç”¨æˆ·ä½“éªŒå¤§å¹…æå‡ï¼** ğŸ‰

