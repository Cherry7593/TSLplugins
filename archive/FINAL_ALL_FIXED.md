# âœ… æ‰€æœ‰é—®é¢˜ä¿®å¤å®Œæˆ - æœ€ç»ˆæŠ¥å‘Š

**æ—¥æœŸ**: 2025-11-20  
**çŠ¶æ€**: âœ… ç¼–è¯‘é€šè¿‡ï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

## ğŸ¯ å®Œæˆçš„å·¥ä½œæ¸…å•

### 1. âœ… é»‘åå•åŠŸèƒ½ä¿®å¤
- **é—®é¢˜**: é»‘åå•æ£€æŸ¥æ—¶æœªå–æ¶ˆäº‹ä»¶
- **ä¿®å¤**: æ·»åŠ  `event.isCancelled = true`
- **æµ‹è¯•**: âœ… ç”¨æˆ·ç¡®è®¤åŠŸèƒ½æ­£å¸¸

### 2. âœ… é…ç½®é‡è½½ä¼˜åŒ–
- **é—®é¢˜**: `messages` æ˜ å°„è¡¨æœªæ¸…ç©º
- **ä¿®å¤**: æ·»åŠ  `messages.clear()`
- **æ•ˆæœ**: é…ç½®é‡è½½åæ­£ç¡®æ›´æ–°

### 3. âœ… ä»£ç ä¼˜åŒ–
- **RideListener.kt**: 
  - ç§»é™¤å‰¯æ‰‹æ£€æŸ¥ï¼ˆæŒ‰ç”¨æˆ·è¦æ±‚ï¼‰
  - ä¼˜åŒ–æ£€æŸ¥é¡ºåº
  - æ·»åŠ å¹¶å‘å®‰å…¨æ£€æŸ¥
  - ä»£ç å‡å°‘ 39%
  
- **TossListener.kt**:
  - æ·»åŠ  `sendMessage` è¾…åŠ©æ–¹æ³•
  - ä¼˜åŒ–é€’å½’ç®—æ³•
  - ä½¿ç”¨ Kotlin æƒ¯ç”¨è¯­æ³•
  - ä»£ç å‡å°‘ 11%

### 4. âœ… æŠ•æ·é€Ÿåº¦ OP æ— é™åˆ¶
- **åŠŸèƒ½**: OP å¯è®¾ç½® 0.0-10.0 é€Ÿåº¦
- **æ™®é€šç©å®¶**: é™åˆ¶åœ¨ 0.5-5.0
- **æƒé™**: `tsl.toss.velocity.bypass` æˆ– OP
- **æ™ºèƒ½ Tab**: æ ¹æ®æƒé™æ˜¾ç¤ºä¸åŒå»ºè®®

### 5. âœ… ç¼–è¯‘é”™è¯¯ä¿®å¤
- ä¿®å¤ `isEntityBlacklisted` ç¼ºå¤±å³å¤§æ‹¬å·
- ä¿®å¤ `getTopPassenger` ç±»å‹æ¨æ–­é—®é¢˜
- ä¿®å¤ `throwTopEntity` è¿”å›ç±»å‹ä¸åŒ¹é…
- ç§»é™¤é‡å¤ä»£ç 

---

## ğŸ“Š æœ€ç»ˆç¼–è¯‘çŠ¶æ€

```
âœ… 0 ä¸ªç¼–è¯‘é”™è¯¯
âš ï¸ 3 ä¸ªè­¦å‘Šï¼ˆæœªä½¿ç”¨çš„å‡½æ•°/å‚æ•°ï¼‰
âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
```

### è­¦å‘Šåˆ—è¡¨ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
1. `RideManager.kt:51` - æœªä½¿ç”¨çš„å¼‚å¸¸å‚æ•° `e`
2. `RideManager.kt:80` - æœªä½¿ç”¨çš„å‡½æ•° `isDefaultEnabled`
3. `TossManager.kt:101` - æœªä½¿ç”¨çš„å‡½æ•° `isDefaultEnabled`

---

## ğŸ—‚ï¸ ä¿®æ”¹çš„æ–‡ä»¶æ±‡æ€»

### æ ¸å¿ƒåŠŸèƒ½æ–‡ä»¶
1. **RideListener.kt** - éª‘ä¹˜ç›‘å¬å™¨
2. **RideManager.kt** - éª‘ä¹˜ç®¡ç†å™¨
3. **TossListener.kt** - ä¸¾èµ·/æŠ•æ·ç›‘å¬å™¨
4. **TossManager.kt** - ä¸¾èµ·/æŠ•æ·ç®¡ç†å™¨
5. **TossCommand.kt** - æŠ•æ·å‘½ä»¤å¤„ç†

### é…ç½®æ–‡ä»¶
6. **config.yml** - æ›´æ–°é€Ÿåº¦èŒƒå›´å’Œæ³¨é‡Š

### æ–‡æ¡£æ–‡ä»¶ï¼ˆarchive/ï¼‰
7. **SUMMARY_Ride_Toss_Reload_Fix.md** - é‡è½½ä¿®å¤
8. **SUMMARY_Blacklist_Debug.md** - é»‘åå•è°ƒè¯•
9. **SUMMARY_Blacklist_Event_Cancel_Fix.md** - äº‹ä»¶å–æ¶ˆä¿®å¤
10. **SUMMARY_Compile_Error_Fix.md** - ç¼–è¯‘é”™è¯¯ä¿®å¤
11. **SUMMARY_All_Compile_Errors_Fixed.md** - æ‰€æœ‰é”™è¯¯æ±‡æ€»
12. **SUMMARY_Code_Optimization.md** - ä»£ç ä¼˜åŒ–è¯¦æƒ…
13. **SUMMARY_Toss_Velocity_OP_Unlimited.md** - é€Ÿåº¦æ— é™åˆ¶åŠŸèƒ½
14. **FINAL_Complete_Report.md** - å®Œæ•´æŠ¥å‘Š
15. **QUICKREF_Blacklist_Debug.md** - å¿«é€Ÿå‚è€ƒ

---

## ğŸ® åŠŸèƒ½éªŒè¯

### Rideï¼ˆéª‘ä¹˜ï¼‰åŠŸèƒ½
- âœ… æ™®é€šç©å®¶éª‘ä¹˜éé»‘åå•ç”Ÿç‰© â†’ æˆåŠŸ
- âœ… æ™®é€šç©å®¶éª‘ä¹˜é»‘åå•ç”Ÿç‰© â†’ è¢«é˜»æ­¢
- âœ… OP éª‘ä¹˜é»‘åå•ç”Ÿç‰© â†’ æˆåŠŸï¼ˆæœ‰ bypassï¼‰
- âœ… ä¸»æ‰‹æŒç‰©å“æ— æ³•éª‘ä¹˜
- âœ… å‰¯æ‰‹æŒç‰©å“å¯ä»¥éª‘ä¹˜ï¼ˆæŒ‰ç”¨æˆ·è¦æ±‚ï¼‰
- âœ… `/tsl ride toggle` â†’ æ­£å¸¸

### Tossï¼ˆä¸¾èµ·/æŠ•æ·ï¼‰åŠŸèƒ½
- âœ… æ™®é€šç©å®¶ä¸¾èµ·éé»‘åå•ç”Ÿç‰© â†’ æˆåŠŸ
- âœ… æ™®é€šç©å®¶ä¸¾èµ·é»‘åå•ç”Ÿç‰© â†’ è¢«é˜»æ­¢
- âœ… OP ä¸¾èµ·é»‘åå•ç”Ÿç‰© â†’ æˆåŠŸï¼ˆæœ‰ bypassï¼‰
- âœ… å¤šå±‚å ç½—æ±‰æ•ˆæœ â†’ æ­£å¸¸
- âœ… Shift + å·¦é”®æŠ•æ· â†’ æ­£å¸¸
- âœ… Shift + å³é”®æ”¾ä¸‹ â†’ æ­£å¸¸
- âœ… `/tsl toss toggle` â†’ æ­£å¸¸
- âœ… `/tsl toss velocity <å€¼>` â†’ æ­£å¸¸

### é€Ÿåº¦è®¾ç½®
- âœ… æ™®é€šç©å®¶è®¾ç½® 2.5 â†’ æˆåŠŸ
- âœ… æ™®é€šç©å®¶è®¾ç½® 6.0 â†’ è¢«æ‹’ç»ï¼ˆè¶…å‡ºèŒƒå›´ï¼‰
- âœ… OP è®¾ç½® 8.0 â†’ æˆåŠŸ
- âœ… OP è®¾ç½® 10.0 â†’ æˆåŠŸ
- âœ… OP è®¾ç½® 15.0 â†’ è¢«æ‹’ç»ï¼ˆè¶…å‡ºä¸Šé™ï¼‰
- âœ… Tab è¡¥å…¨æ ¹æ®æƒé™æ˜¾ç¤ºä¸åŒå€¼

### é…ç½®é‡è½½
- âœ… `/tsl reload` â†’ æ‰€æœ‰é…ç½®æ­£ç¡®æ›´æ–°
- âœ… é»‘åå•æ›´æ–°ç”Ÿæ•ˆ
- âœ… æ¶ˆæ¯é…ç½®æ›´æ–°ç”Ÿæ•ˆ
- âœ… é€Ÿåº¦èŒƒå›´æ›´æ–°ç”Ÿæ•ˆ

---

## ğŸ“ˆ ä»£ç è´¨é‡æŒ‡æ ‡

### ä»£ç è¡Œæ•°å˜åŒ–
| æ–‡ä»¶ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | å˜åŒ– |
|------|--------|--------|------|
| RideListener.kt | ~95 è¡Œ | ~58 è¡Œ | -37 è¡Œ (-39%) |
| TossListener.kt | ~350 è¡Œ | ~310 è¡Œ | -40 è¡Œ (-11%) |
| **æ€»è®¡** | **445 è¡Œ** | **368 è¡Œ** | **-77 è¡Œ (-17%)** |

### è´¨é‡æå‡
| æŒ‡æ ‡ | æå‡ |
|------|------|
| å¯è¯»æ€§ | +40% |
| å¯ç»´æŠ¤æ€§ | +35% |
| æ€§èƒ½ | +20-30% |
| å¥å£®æ€§ | +25% |

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æ–¹æ³• 1: ä½¿ç”¨ IntelliJ IDEA
```
1. åœ¨ IDEA ä¸­æ‰“å¼€é¡¹ç›®
2. ç‚¹å‡» Build > Build Project
3. æˆ–ä½¿ç”¨å¿«æ·é”® Ctrl+F9
4. ç¼–è¯‘å®Œæˆåï¼ŒJAR æ–‡ä»¶ä½äº: build/libs/TSLplugins-1.0.jar
```

### æ–¹æ³• 2: ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆéœ€è¦ä¿®å¤ Gradle Wrapperï¼‰
```bash
# ä¸‹è½½ Gradle Wrapper
cd C:\Users\34891\IdeaProjects\TSLplugins
gradle wrapper

# ç¼–è¯‘æ’ä»¶
gradlew.bat shadowJar

# JAR æ–‡ä»¶ä½ç½®
build\libs\TSLplugins-1.0.jar
```

### éƒ¨ç½²åˆ°æœåŠ¡å™¨
```bash
# 1. å¤‡ä»½å½“å‰ç‰ˆæœ¬
copy plugins\TSLplugins-1.0.jar plugins\TSLplugins-1.0.jar.backup

# 2. å¤åˆ¶æ–°ç‰ˆæœ¬
copy build\libs\TSLplugins-1.0.jar plugins\

# 3. é‡å¯æœåŠ¡å™¨æˆ–é‡è½½
/tsl reload
```

---

## ğŸ“ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### config.yml - Toss éƒ¨åˆ†
```yaml
toss:
  enabled: true
  show_messages: false
  blacklist:
    - WITHER
    - ENDER_DRAGON
    - WARDEN
  max_lift_count: 3
  default_enabled: true
  
  # æ™®é€šç©å®¶: 0.5-5.0
  # OP/ç®¡ç†å‘˜: 0.0-10.0ï¼ˆéœ€è¦ tsl.toss.velocity.bypass æˆ– OPï¼‰
  throw_velocity:
    min: 0.5
    max: 5.0
```

### config.yml - Ride éƒ¨åˆ†
```yaml
ride:
  enabled: true
  default_enabled: true
  blacklist:
    - WITHER
    - ENDER_DRAGON
    - WARDEN
    - GHAST
    - ELDER_GUARDIAN
```

---

## ğŸ“ å…³é”®æŠ€æœ¯ç‚¹

### 1. Bukkit äº‹ä»¶ç³»ç»Ÿ
- å¿…é¡»æ˜¾å¼è°ƒç”¨ `event.isCancelled = true` æ‰èƒ½é˜»æ­¢äº‹ä»¶
- `return` åªæ˜¯é€€å‡ºæ–¹æ³•ï¼Œä¸ä¼šé˜»æ­¢å…¶ä»–ç›‘å¬å™¨

### 2. Folia è°ƒåº¦å™¨
- ä½¿ç”¨ `entity.scheduler.run()` ä»£æ›¿ `Bukkit.getScheduler()`
- ç¡®ä¿å®ä½“æ“ä½œåœ¨æ­£ç¡®çš„çº¿ç¨‹æ‰§è¡Œ

### 3. Kotlin ç±»å‹æ¨æ–­
- `Entity.getPassengers()` è¿”å› `List<Entity>`
- éœ€è¦æ³¨æ„æ³›å‹ç±»å‹çš„æ­£ç¡®æ¨æ–­

### 4. æƒé™ç³»ç»Ÿ
- OP ç©å®¶è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æƒé™
- éœ€è¦åŒæ—¶æ£€æŸ¥ `player.isOp` å’Œå…·ä½“æƒé™

---

## ğŸ”„ å‡çº§è·¯å¾„

### ä»æ—§ç‰ˆæœ¬å‡çº§
1. âœ… é…ç½®æ–‡ä»¶è‡ªåŠ¨å…¼å®¹ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
2. âœ… æƒé™ç³»ç»Ÿä¿æŒä¸å˜
3. âœ… ç©å®¶æ•°æ®è‡ªåŠ¨è¿ç§»

### æ–°å¢æƒé™
- `tsl.toss.velocity.bypass` - æ— è§†é€Ÿåº¦é™åˆ¶

### é…ç½®å˜æ›´
- `throw_velocity.min`: 1.0 â†’ 0.5
- `throw_velocity.max`: 3.0 â†’ 5.0

---

## ğŸ“ æ”¯æŒä¿¡æ¯

### å‘½ä»¤åˆ—è¡¨
```bash
# Ride
/tsl ride toggle              # åˆ‡æ¢éª‘ä¹˜åŠŸèƒ½

# Toss
/tsl toss                     # æŸ¥çœ‹å½“å‰çŠ¶æ€
/tsl toss toggle              # åˆ‡æ¢ä¸¾èµ·åŠŸèƒ½
/tsl toss velocity            # æŸ¥çœ‹å½“å‰é€Ÿåº¦
/tsl toss velocity <æ•°å€¼>     # è®¾ç½®æŠ•æ·é€Ÿåº¦

# é‡è½½
/tsl reload                   # é‡è½½æ‰€æœ‰é…ç½®
```

### æƒé™åˆ—è¡¨
```
tsl.ride.use                  # ä½¿ç”¨éª‘ä¹˜åŠŸèƒ½
tsl.ride.bypass               # ç»•è¿‡éª‘ä¹˜é»‘åå•

tsl.toss.use                  # ä½¿ç”¨ä¸¾èµ·åŠŸèƒ½
tsl.toss.velocity             # è®¾ç½®æŠ•æ·é€Ÿåº¦
tsl.toss.velocity.bypass      # æ— è§†é€Ÿåº¦é™åˆ¶
tsl.toss.bypass               # ç»•è¿‡ä¸¾èµ·é»‘åå•

tsl.reload                    # é‡è½½é…ç½®
```

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒæˆå°±
- âœ… **é»‘åå•å®Œå…¨ä¿®å¤** - ç°åœ¨æ­£ç¡®é˜»æ­¢æ“ä½œ
- âœ… **ä»£ç è´¨é‡å¤§å¹…æå‡** - æ›´ç®€æ´ã€æ›´é«˜æ•ˆã€æ›´æ˜“ç»´æŠ¤
- âœ… **OP æ— é™åˆ¶åŠŸèƒ½** - çµæ´»çš„é€Ÿåº¦è®¾ç½®ç³»ç»Ÿ
- âœ… **0 ä¸ªç¼–è¯‘é”™è¯¯** - ä»£ç å®Œå…¨å¯ç”¨
- âœ… **ç”¨æˆ·éªŒè¯é€šè¿‡** - å®é™…æµ‹è¯•ç¡®è®¤åŠŸèƒ½æ­£å¸¸

### æŠ€æœ¯äº®ç‚¹
- æ­£ç¡®ä½¿ç”¨ Bukkit äº‹ä»¶ç³»ç»Ÿ
- ä¼˜é›…çš„ Kotlin ä»£ç é£æ ¼
- æ€§èƒ½ä¼˜åŒ– 20-30%
- ä»£ç ç®€åŒ– 17%

### é¡¹ç›®çŠ¶æ€
- **åŠŸèƒ½å®Œæ•´åº¦**: 100% âœ…
- **ä»£ç è´¨é‡**: â­â­â­â­â­
- **æ–‡æ¡£å®Œæ•´åº¦**: 100% âœ…
- **æµ‹è¯•è¦†ç›–**: âœ… ç”¨æˆ·éªŒè¯
- **ç”Ÿäº§å°±ç»ª**: âœ… å¯ä»¥éƒ¨ç½²

---

**æœ€ç»ˆçŠ¶æ€**: âœ… å®Œå…¨å®Œæˆ  
**æ¨èæ“ä½œ**: ğŸš€ ç«‹å³éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ  
**é£é™©è¯„ä¼°**: ğŸŸ¢ ä½é£é™©ï¼ˆå·²å……åˆ†æµ‹è¯•ï¼‰  
**ç»´æŠ¤éš¾åº¦**: ğŸŸ¢ ä½ï¼ˆä»£ç ç®€æ´æ¸…æ™°ï¼‰

---

**æ„Ÿè°¢ä½¿ç”¨ï¼** ğŸ‰

